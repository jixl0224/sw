<?xml version="1.0" encoding="UTF-8"?>

<B title="用户信用卡" fullPage="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://snsoft.cn/schema/UI" xsi:schemaLocation="http://snsoft.cn/schema/UI
		https://adk-svn.sino-clink.com.cn/svn/adkdoc/configs/schema/UI.xsd
		">
	<m:DialogPane name="param" title="参数" region="north" layoutm="grid" showToolbar="true">
		<c name="odate" title="日期" sqltype="91" noblank="true" initval="%CURDATE" aidInputerBtn="true" hidden="true" />
	</m:DialogPane>
	<m:T region="center">
		<m:GridTable name="stat" title="金额信息"  sqlexpr="pm_ucard" mainui="param" xprops.LoadDataService="SN-PM.BalanceService#queryBill" nmpre="filter" rdonly="true"
			noCollapseQPaneAfterRefresh="true" readwspid="PM" writewspid="PM" >
			<c name="ccode" title="信用卡" sqltype="12" width="80" asceOrd="true" codedata="#SW-CD.ccard" showname="true" />
			<c name="sdate" title="账单日" sqltype="4" width="60" />
			<c name="ddate" title="还款日" sqltype="4" width="60" />
			<c name="cline" title="额度" sqltype="2" width="80" maxdeci="2" bottomval="*"/>
			<c name="fcy1" title="未还款" sqltype="2" width="80" maxdeci="2" bottomval="*"/>
			<c name="fcy2" title="未出账" sqltype="2" width="80" maxdeci="2" bottomval="*"/>
			<c name="fcy3" title="已还款" sqltype="2" width="80" maxdeci="2" bottomval="*"/>
			<c name="fcy4" title="剩余额度" sqltype="2" width="80" maxdeci="2" bottomval="*"/>
			<c name="ratio1" title="消费占比" sqltype="2" width="80" maxdeci="2" percent="true"/>
			<c name="sdays" title="天数|账单" sqltype="4" width="60" />
			<c name="ddays" title="天数|还款" sqltype="4" width="60" />
		</m:GridTable>
		<m:GridTable name="ucard" title="账单/还款日"   sqlexpr="pm_ucard" mainui="param" xprops.LoadDataService="SN-PM.CreditUIService#queryCardView" nmpre="filter" rdonly="true"
			noCollapseQPaneAfterRefresh="true" readwspid="PM" writewspid="PM" uilisteners="snsoft.sw.card.CreditViewListener.new">
			<jslistener>
		  	<![CDATA[
		  	date:new Date().getDate(),
		  	onTableCellRender:function(table,e)
		  	{
		  		var name = table.columns[e.col].name;
		  		if(name.indexOf("$CRCOL$") == 0)
		  		{
		  			if("D" == table.dataSet.getValue(e.col-1,e.row))
		  			{
		  				e.renderInfo.background="#f44336";
		  			} else {
				  		var date = Number.toInt(name.substring(7,name.lastIndexOf("-")));
				  		if(this.date == date)
				  		{
				  			e.renderInfo.background="#f6a5c1";
				  		}
			  		}
		  		}
		  	}
		  	]]>
			</jslistener>
			<c name="ccode" title="信用卡" sqltype="12" width="120" asceOrd="true" crossRow="true" codedata="#SW-CD.ccard" showname="true" />
			<c name="odate" title="账单日" sqltype="4" width="70" asceOrd="true" crossCol="true" codedata="1:1" />
			<c name="datetype" title="还款日" sqltype="12" width="30" crossData="true" codedata="#DT_CD.datetype" showname="true" />
		</m:GridTable>
	</m:T>
</B>
